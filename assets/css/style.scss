$highlight: #ffc107 !default;
$background: #f8f4d7 !default;
$cat_highlight: #ff9147 !default;
$cat_background: #f8e4e7 !default;
$new_highlight: #71cf37 !default;
$new_background: #e4f8e7 !default;
$note_highlight: #888888 !default;
$note_background: #eeeeee !default;

body {
  line-height: 1.35em;
}

.content,
.content .post .post-meta .tags,
.taxonomy {
  .tag,
  .taxonomy-element {
    padding: 0;
    border-radius: 0;
    border: none;
    background: inherit;
    line-height: 1.8em;
    a {
      padding: 0.1rem 0.4rem;
      border-radius: 0.6rem;
      border: 1px solid $highlight;
      background: $background;
      color: inherit;
    }
  }
  .category {
    a {
      background: $cat_background;
      border-color: $cat_highlight;
    }
  }
  .separator {
    display: none;
  }
}

.taxonomy ul {
  margin: 0;
  li {
    display: inline-block !important;
    margin: 0.3rem 0.3rem;
  }
}

.content article header {
  margin-top: 0;
}

/* dense paragraphs */
p,
ul,
ol {
  margin-top: 1rem;
  margin-bottom: 1rem;
}
li p {
  margin-top: 0;
  margin-bottom: 0;
}
ul ul,
ol ul,
ul ol,
ol ol {
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
}

h1,
h2,
h3,
h4,
h5,
h6 {
  margin-top: 3.5rem;
  margin-bottom: 1rem;
}

dd > ol {
  margin-top: 0;
  margin-bottom: 0;
}

/* dense & clean table */
table th,
table td {
  padding: 0.2rem 0.4rem;
  border-width: 1px 0px;
  border-color: gray;
}
table tr:last-child td,
table th {
  border-bottom-width: 2px;
  border-bottom-color: black;
  border-bottom-style: solid;
}

/* Equal width table cells */
.ox-hugo-table.equal-width td,
.ox-hugo-table.equal-width th {
  max-width: 0;
}

/* table may be wider than text */
table {
  min-width: 90rem;
  max-width: 160rem;
  position: relative;
  margin-left: auto;
  margin-right: auto;
}

.ox-hugo-table.small table {
  min-width: initial;
}
.ox-hugo-table.small table td {
  padding-left: 1em;
  padding-right: 1em;
}

.ox-hugo-table.full-width {
  width: 100vw;
  overflow-x: auto;
  position: relative;
  left: 50%;
  margin-left: -50vw;
  background: white;
  padding: 2em;
}

div.canvas {
  width: 100vw;
  left: 50%;
  margin-left: -50vw;
  position: relative;
  display: flex;
  justify-content: center;
}
div.canvas canvas {
  max-width: 100vw;
  background: white;
  padding: 1em;
}

.ox-hugo-table.full-width .table-caption {
  width: auto;
  max-width: 90rem;
  padding-left: 60px;
  padding-right: 60px;
  margin-left: auto;
  margin-right: auto;
}

.content figure {
  float: right;
  clear: right;
  margin: 2rem;
  margin-right: calc(max(-35% - 2rem, -50vw + 50% + 2em));
  max-width: 35%;
}

.content figure.medium {
  margin-right: calc(max(-45% - 2rem, -50vw + 50% + 2rem));
  max-width: 45%;
}

.content figure.large {
  margin-right: calc(max(-60% - 2rem, -50vw + 50% + 2rem));
  max-width: 60%;
}

.content figure.inset {
  float: none;
  clear: initial;
  margin: 2rem;
  max-width: 80%;
  margin-left: auto;
  margin-right: auto;
}

.content figure.inset.small {
  max-width: 50%;
}
.content figure.inset.large {
  width: 100%;
  max-width: 100%;
}

@media only screen and (max-width: 920px) {
  .content figure {
    float: none;
    margin-left: auto;
    margin-right: auto;
    max-width: calc(0.35 * 860px);
  }

  .content figure.medium {
    float: none;
    margin-left: auto;
    margin-right: auto;
    max-width: calc(0.45 * 860px);
  }

  .content figure.large {
    float: none;
    margin-left: auto;
    margin-right: auto;
    max-width: calc(0.6 * 860px);
  }
}

.content article p {
  hyphens: none;
}

/* TOC */
.toc {
  position: sticky;
  float: left;
  top: 0;
  margin-left: calc(max(-60% - 2rem, -50vw + 50% + 2rem));
  max-width: calc(50vw - 45rem);
  font-size: 14px;
  line-height: 20px;
  padding-top: 2em;
  padding-left: 0em;
  padding-right: 2em;
}
@media only screen and (max-width: 1500px) {
  .toc {
    display: none;
  }
}

.toc .heading {
  font-weight: bold;
}
.toc ul {
  list-style-type: none;
  padding-left: 1em;
  margin-top: 0rem;
  margin-bottom: 0rem;
}
.toc > ul {
  padding-left: 0em;
  max-height: 90vh;
  overflow-y: auto;
}
.toc li,
.toc a {
  color: darkgray;
  transition: none;
}
.toc .parent > a {
  /*color: #777;*/
}
.toc li.selected,
.toc li.selected > a {
  color: black;
}

a {
  /* Prevent annoying black flashes */
  transition-property: color;
}

mjx-container {
  overflow-x: auto;
  overflow-y: clip;
}

.google-scholar {
  content: url("/images/google-scholar.svg");
  height: 1em;
  width: auto;
}
.about .google-scholar {
  filter: grayscale(100%);
}
.about .google-scholar:hover {
  filter: initial;
}

.list ul li .title,
.centered .about ul li a,
.centered .about ul li a,
.navigation a {
  transition: initial;
  &:hover,
  &:focus {
    color: $highlight;
    text-decoration: none;
  }
}

.footer .links a {
  padding-left: 0.5em;
  padding-right: 0.5em;
}
.arxiv {
  filter: invert(100%);
  height: 1em;
  content: url("https://static.arxiv.org/static/browse/0.3.4/images/arxiv-logo-one-color-white.svg");
}

.modified-on {
  font-size: smaller;
}

.fn-tooltip {
  display: none;
  position: absolute;
  bottom: 2em;
  left: -2em;
}
.fn-tooltip .fn-text {
  display: block;
  padding: 0.3em;
  margin-left: auto;
  margin-right: auto;
  background: lightgrey;
  border: 1px black solid;
  border-radius: 5px;
  width: max-content;
  max-width: 400px;
  line-height: initial;
}
a.footnote-ref:hover + span.fn-tooltip {
  display: inline-block;
}

// Styling for homepage decription lists.
.list {
  dl {
    margin: 0.5em 0 0.5em 0;
    display: grid;
    grid-template-columns: 20% auto;
    font-size: 1.8rem;

    @media only screen and (max-width: 768px) {
      grid-template-columns: 100%;
    }

    dt {
      grid-column: 1;
      text-align: right;
      margin-right: 3rem;

      @media only screen and (max-width: 768px) {
        display: block;
        text-align: left;
      }
    }

    dd {
      grid-column: 2;

      font-weight: 700;

      p:first-child {
        font-weight: normal;
      }

      p {
        margin: 0;
      }

      @media only screen and (max-width: 768px) {
        margin: 0 0 1.6rem 0;
        grid-column: 1;
      }

      margin-inline-start: 0;
    }
  }
}

.centered .about {
  h1 {
    margin-top: 0rem;
  }
  ul {
    margin-top: 1rem;
  }
}

h1,
h2,
h3,
h4,
h5,
h6 {
  .section-num {
    color: $highlight;
  }
}

// Customize headings
h1 {
  font-size: 3.4rem;
  line-height: 6rem;

  @media only screen and (max-width: 768px) {
    font-size: 3.2rem;
    line-height: 5.7rem;
  }
}

article > div > h1 {
  border-bottom: 3px solid $highlight;
  background-color: $background;
  padding-left: calc(min(6rem, 50vw - 50%));
  margin-left: calc(max(-6rem, -50vw + 50%));
  margin-right: calc(max(-6rem, -50vw + 50%));
  max-width: 100vw;
}

h2 {
  font-size: 2.8rem;
  line-height: 3.2rem;
  border-bottom: 3px solid $highlight;

  @media only screen and (max-width: 768px) {
    font-size: 2.6rem;
    line-height: 3rem;
  }
}

.about h2 {
  border-bottom: initial;
}

h3 {
  font-size: 2.4rem;
  line-height: 2.8rem;
  text-decoration: underline;
  text-decoration-color: $highlight;
  text-decoration-thickness: 2px;
  margin-top: 2rem;
  margin-bottom: 0.75rem;

  @media only screen and (max-width: 768px) {
    font-size: 2.2rem;
    line-height: 2.6rem;
  }
}

h4 {
  font-size: 2rem;
  line-height: 2.4rem;
  margin-top: 1.5rem;
  margin-bottom: 0.5rem;

  @media only screen and (max-width: 768px) {
    font-size: 1.8rem;
    line-height: 2.2rem;
  }
}

h5 {
  font-size: 1.4rem;
  line-height: 1.8rem;
  margin-top: 1rem;
  margin-bottom: 0.25rem;

  @media only screen and (max-width: 768px) {
    font-size: 1.2rem;
    line-height: 1.6rem;
  }
}

h6 {
  font-size: 1.2rem;
  line-height: 1.4rem;
  margin-top: 0.5rem;
  margin-bottom: 0rem;

  @media only screen and (max-width: 768px) {
    font-size: 1.2rem;
    line-height: 1.2rem;
  }
}

// Customize code style
.highlight > div,
.highlight > pre {
  margin: 1rem 0rem 0 0rem;
  padding: 0.5rem 1rem;
  border-radius: 0.9rem;
  border: 1px solid $highlight;
  border-bottom: 2px solid $highlight;
  min-width: calc(100% - 4rem);
  max-width: calc(100vw - 8rem);
  overflow-x: auto;
  width: fit-content;
  left: 50%;
  transform: translateX(-50%);
  position: relative;
  @media only screen and (max-width: 920px) {
    left: 50%;
    transform: translateX(-50vw);
    border-radius: 0;
    border-left: none;
    border-right: none;
    padding-left: 3rem;
    padding-right: 1rem;
    max-width: initial;
    width: 100vw;
    tr td:first-child {
      display: none;
    }
  }
}

// Un-indent indented code blocks.
ul > li > .highlight > div,
ol > li > .highlight > div {
  @media only screen and (max-width: 920px) {
    transform: translateX(calc(-50vw - 2rem));
  }
}

.highlight {
  // display: flex;
  // justify-content: center;
}

pre {
  display: block;
  font-size: 1.6rem;
  font-weight: 400;
  line-height: 1.8rem;
  overflow-x: auto;
  margin: 0;
  padding: 0;

  // Code block
  code {
    font-size: 1.4rem;
    font-weight: 400;
    border-radius: 0.6rem;
    padding: 0;

    display: inline-block;
    background-color: inherit;
    color: inherit;
    border: none;
  }
}

// Inline code
code {
  font-size: 1.5rem;
  border-radius: 0.4rem;
  padding: 0.15rem 0.3rem;
  background: $background;
  border: 1px solid #highlight;
}

blockquote {
  border-left: 2px solid $highlight;
  padding-left: 2rem;
  line-height: 2.2rem;
  font-weight: 400;
  font-style: italic;
}

.chroma table {
  min-width: initial;
  max-width: 100%;
  position: initial;
}

// Customize code captions to look like figure captions.
.src-block-caption,
figcaption p,
.table-caption {
  .src-block-number,
  .figure-number,
  .table-number {
    a {
      font-weight: inherit;
      color: inherit;
    }
    font-weight: 700;
  }

  text-align: center;
  font-style: italic;
  font-size: 1.6rem;
  margin: 0;
}

.org-todo {
  color: red;
  font-weight: normal;
}
.org-done {
  color: green;
  font-weight: normal;
}

nav.navigation {
  border-bottom: 2px solid $highlight;
  height: 4rem;
  .container {
    margin-top: 0.7rem;
    margin-bottom: 0.7rem;

    ul {
      padding-left: 0;
    }
  }
}

.content article header h1 {
  font-size: 3.5rem;
  line-height: 4rem;
}

figure > img {
  background: white;
  padding: 0.6rem;
  border-radius: 0.9rem;
}

.content .container ul li {
  flex-wrap: wrap;
  .tags {
    .fa-tag {
      display: none;
    }
    flex-basis: 100%;
    padding-left: 36%;
    width: 0;
    font-size: 15px;
  }
  @media only screen and (max-width: 768px) {
    .tags {
      padding-left: 0;
      flex-basis: 100%;
      width: 100%;
    }
  }
}

article div p:nth-child(2) mjx-container[display="true"] {
  display: none;
}

.category[data-tag="results"] a,
.category[data-tag="ideas"] a,
.category[data-tag="paper"] a,
.tag[data-tag="highlight"] a {
  border-color: $new_highlight !important;
  background-color: $new_background !important;
}

.tag[data-tag="note"] a {
  border-color: $note_highlight !important;
  background-color: $note_background !important;
}

.tag[data-tag="highlight"] a {
  display: none;
}
